const pokemonRepository=function(){const e=[],t="https://pokeapi.co/api/v2/pokemon/?limit=100",n=document.querySelector("#modal-container");function i(t){"object"==typeof t&&"name"in t&&"detailsUrl"in t?e.push(t):console.log("The Pokemon is not correct<br>")}function o(e){c();const t=e.detailsUrl;return fetch(t).then(function(e){return e.json()}).then(function(t){d(),e.image=t.sprites.front_default,e.height=t.height;let n=t.types.map(function(e){return e.type.name});e.type=n}).catch(function(e){d(),console.error(e)})}function s(e){o(e).then(function(){!function(e){n.innerHTML="";let t=document.createElement("div");t.classList.add("modal");let i=document.createElement("button");i.classList.add("modal-close"),i.innerText="X",i.addEventListener("click",l);let o=document.createElement("div");o.classList.add("element-container");let s=document.createElement("img");s.classList.add("pokemon-img");let c=document.createElement("h1");c.classList.add("pokemon-title");let d=document.createElement("p");d.classList.add("pokemon-type");let a=document.createElement("p");a.classList.add("pokemon-height"),s.src=e.image;const r=e.name.charAt(0).toUpperCase()+e.name.slice(1);c.innerText=r,1===e.type.length?d.innerText="Type: "+e.type:d.innerText="Types: "+e.type;e.height>10?a.innerText="Height: "+e.height/10+" m ":a.innerText="Height: "+e.height+"0 cm ";t.appendChild(i),t.appendChild(o),o.appendChild(s),o.appendChild(c),o.appendChild(d),o.appendChild(a),n.appendChild(t),n.classList.add("is-visible")}(e)})}function c(){document.querySelector("#loading").style.visibility="visible"}function d(){document.querySelector("#loading").style.visibility="hidden"}function l(){n.classList.remove("is-visible")}return window.addEventListener("keydown",e=>{"Escape"===e.key&&n.classList.contains("is-visible")&&l()}),n.addEventListener("click",e=>{e.target===n&&l()}),{add:i,getAll:function(){return e},addListItem:function(e){const t=document.querySelector(".pokemon-list"),n=document.createElement("li");n.classList.add("list-item","light-shadow");const i=document.createElement("img");i.classList.add("list-img");const o=document.createElement("button");i.src="img/pokeball.svg",o.innerText=e.name,o.classList.add("pokemon-button"),n.appendChild(i),n.appendChild(o),t.appendChild(n),n.addEventListener("click",function(t){s(e)})},loadList:function(){return c(),fetch(t).then(function(e){return e.json()}).then(function(e){d(),e.results.forEach(function(e){i({name:e.name.charAt(0).toUpperCase()+e.name.slice(1),detailsUrl:e.url})})}).catch(function(e){d(),console.error(e)})},loadDetails:o,showDetails:s}}();function darkMode(){const e=document.getElementById("check"),t=document.body;1==e.checked?t.classList.add("dark-mode"):t.classList.remove("dark-mode");const n=document.getElementById("pokemon-list").getElementsByTagName("li");for(let t=0;t<n.length;t++)1==e.checked?(n[t].classList.add("dark-shadow"),n[t].classList.remove("light-shadow")):n[t].classList.add("light-shadow")}pokemonRepository.loadList().then(function(){pokemonRepository.getAll().forEach(function(e){pokemonRepository.addListItem(e)})});
